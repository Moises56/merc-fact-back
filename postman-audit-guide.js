/**
 * GU√çA COMPLETA PARA PROBAR ENDPOINTS DE AUDITOR√çA EN POSTMAN
 * An√°lisis detallado de cada endpoint con ejemplos y respuestas esperadas
 */

// ==============================================================================
// üîê CONFIGURACI√ìN INICIAL PARA POSTMAN
// ==============================================================================

console.log(`
üìã CONFIGURACI√ìN INICIAL REQUERIDA:

1. BASE URL: http://localhost:3000
2. AUTENTICACI√ìN: Todos los endpoints requieren JWT cookie
3. HEADERS NECESARIOS:
   - Content-Type: application/json
   - Cookie: auth-token=JWT_TOKEN_HERE

üîë PASOS PARA OBTENER TOKEN DE AUTENTICACI√ìN:
1. POST /api/auth/login con credenciales v√°lidas
2. Copiar el token del header "Set-Cookie" en la respuesta
3. Usar ese token en todos los endpoints de auditor√≠a

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`);

// ==============================================================================
// üìä AN√ÅLISIS DETALLADO DE CADA ENDPOINT
// ==============================================================================

const auditEndpoints = [
  {
    id: 1,
    method: 'POST',
    endpoint: '/api/audit',
    title: 'Crear Log de Auditor√≠a Manual',
    description: 'Permite crear un registro de auditor√≠a manualmente',
    authRequired: true,
    roles: ['ADMIN', 'USER', 'MARKET'],
    headers: {
      'Content-Type': 'application/json',
      'Cookie': 'auth-token=YOUR_JWT_TOKEN'
    },
    body: {
      accion: 'CREATE',
      tabla: 'users',
      registroId: 'uuid-del-registro-opcional',
      datosAntes: null,
      datosDespues: {
        name: 'Nuevo Usuario',
        email: 'test@example.com'
      },
      ip: '192.168.1.100',
      userAgent: 'PostmanRuntime/7.29.0'
    },
    expectedResponse: {
      status: 201,
      body: {
        id: 'uuid-generado',
        accion: 'CREATE',
        tabla: 'users',
        userId: 'uuid-del-usuario-autenticado',
        registroId: 'uuid-del-registro-opcional',
        datosAntes: null,
        datosDespues: '{"name":"Nuevo Usuario","email":"test@example.com"}',
        ip: '192.168.1.100',
        userAgent: 'PostmanRuntime/7.29.0',
        createdAt: '2025-07-15T16:30:00.000Z'
      }
    },
    notes: [
      'El userId se obtiene autom√°ticamente del token JWT',
      'Los campos datosAntes y datosDespues se serializan a JSON',
      'El registroId es opcional',
      'IP y userAgent se pueden obtener autom√°ticamente del request'
    ]
  },

  {
    id: 2,
    method: 'GET',
    endpoint: '/api/audit/logs',
    title: 'Obtener Todos los Logs de Auditor√≠a',
    description: 'Recupera todos los logs con filtros y paginaci√≥n',
    authRequired: true,
    roles: ['ADMIN', 'USER', 'MARKET'],
    headers: {
      'Cookie': 'auth-token=YOUR_JWT_TOKEN'
    },
    queryParams: {
      page: 1,
      limit: 10,
      accion: 'LOGIN',
      tabla: 'users',
      userId: 'uuid-del-usuario',
      startDate: '2025-07-01T00:00:00.000Z',
      endDate: '2025-07-15T23:59:59.999Z'
    },
    url_examples: [
      'GET /api/audit/logs',
      'GET /api/audit/logs?page=1&limit=5',
      'GET /api/audit/logs?accion=LOGIN',
      'GET /api/audit/logs?tabla=users',
      'GET /api/audit/logs?userId=f199d049-f069-4a94-9ab3-5cd9fcac0c03',
      'GET /api/audit/logs?startDate=2025-07-01&endDate=2025-07-15',
      'GET /api/audit/logs?accion=CHANGE_PASSWORD&tabla=users&page=1&limit=20'
    ],
    expectedResponse: {
      status: 200,
      body: {
        data: [
          {
            id: 'uuid-del-log',
            accion: 'LOGIN',
            tabla: 'auth',
            userId: 'uuid-del-usuario',
            registroId: null,
            datosAntes: null,
            datosDespues: '{"username":"admin","success":true}',
            ip: '127.0.0.1',
            userAgent: 'Mozilla/5.0...',
            createdAt: '2025-07-15T16:25:00.000Z',
            user: {
              id: 'uuid-del-usuario',
              username: 'admin',
              nombre: 'Administrador'
            }
          }
        ],
        pagination: {
          current_page: 1,
          total_pages: 5,
          total_items: 50,
          items_per_page: 10,
          has_next: true,
          has_previous: false
        }
      }
    },
    notes: [
      'Todos los par√°metros de query son opcionales',
      'Paginaci√≥n por defecto: page=1, limit=10',
      'Fechas en formato ISO 8601',
      'Incluye informaci√≥n del usuario que realiz√≥ la acci√≥n'
    ]
  },

  {
    id: 3,
    method: 'GET',
    endpoint: '/api/audit/stats',
    title: 'Obtener Estad√≠sticas de Auditor√≠a',
    description: 'Recupera estad√≠sticas resumidas del sistema de auditor√≠a',
    authRequired: true,
    roles: ['ADMIN', 'USER', 'MARKET'],
    headers: {
      'Cookie': 'auth-token=YOUR_JWT_TOKEN'
    },
    url_examples: [
      'GET /api/audit/stats'
    ],
    expectedResponse: {
      status: 200,
      body: {
        totalLogs: 1250,
        actionStats: {
          LOGIN: 450,
          LOGOUT: 420,
          CREATE: 150,
          UPDATE: 180,
          DELETE: 50
        },
        tableStats: {
          auth: 870,
          users: 200,
          mercados: 100,
          locales: 80
        },
        userStats: {
          'f199d049-f069-4a94-9ab3-5cd9fcac0c03': 500,
          'de34d9b7-0a00-4c5d-9162-36e92141f6ad': 300,
          '12a80042-1550-4f3c-9218-668709194351': 450
        },
        recentActivity: [
          {
            accion: 'LOGIN',
            count: 25,
            lastOccurrence: '2025-07-15T16:30:00.000Z'
          }
        ],
        periodStats: {
          today: 45,
          thisWeek: 320,
          thisMonth: 1250
        }
      }
    },
    notes: [
      'No requiere par√°metros',
      'Proporciona un resumen completo de la actividad',
      '√ötil para dashboards y monitoreo',
      'Incluye estad√≠sticas por acci√≥n, tabla y usuario'
    ]
  },

  {
    id: 4,
    method: 'GET',
    endpoint: '/api/audit/users/:userId',
    title: 'Obtener Logs por Usuario Espec√≠fico',
    description: 'Recupera todos los logs de auditor√≠a de un usuario espec√≠fico',
    authRequired: true,
    roles: ['ADMIN', 'USER', 'MARKET'],
    headers: {
      'Cookie': 'auth-token=YOUR_JWT_TOKEN'
    },
    pathParams: {
      userId: 'f199d049-f069-4a94-9ab3-5cd9fcac0c03'
    },
    queryParams: {
      page: 1,
      limit: 10
    },
    url_examples: [
      'GET /api/audit/users/f199d049-f069-4a94-9ab3-5cd9fcac0c03',
      'GET /api/audit/users/f199d049-f069-4a94-9ab3-5cd9fcac0c03?page=2&limit=20'
    ],
    expectedResponse: {
      status: 200,
      body: {
        data: [
          {
            id: 'uuid-del-log',
            accion: 'LOGIN',
            tabla: 'auth',
            userId: 'f199d049-f069-4a94-9ab3-5cd9fcac0c03',
            registroId: null,
            datosAntes: null,
            datosDespues: '{"username":"mougrind","loginTime":"2025-07-15T16:25:00.000Z"}',
            ip: '127.0.0.1',
            userAgent: 'Mozilla/5.0...',
            createdAt: '2025-07-15T16:25:00.000Z',
            user: {
              id: 'f199d049-f069-4a94-9ab3-5cd9fcac0c03',
              username: 'mougrind',
              nombre: 'Mou'
            }
          }
        ],
        pagination: {
          current_page: 1,
          total_pages: 3,
          total_items: 25,
          items_per_page: 10
        },
        userSummary: {
          totalActions: 25,
          mostCommonAction: 'LOGIN',
          firstActivity: '2025-06-01T10:00:00.000Z',
          lastActivity: '2025-07-15T16:25:00.000Z'
        }
      }
    },
    notes: [
      'Requiere UUID v√°lido del usuario',
      'Incluye resumen de actividad del usuario',
      'Soporta paginaci√≥n',
      '√ötil para auditor√≠as espec√≠ficas de usuario'
    ]
  },

  {
    id: 5,
    method: 'GET',
    endpoint: '/api/audit/entities/:entityType',
    title: 'Obtener Logs por Tipo de Entidad',
    description: 'Recupera logs de auditor√≠a filtrados por tipo de entidad/tabla',
    authRequired: true,
    roles: ['ADMIN', 'USER', 'MARKET'],
    headers: {
      'Cookie': 'auth-token=YOUR_JWT_TOKEN'
    },
    pathParams: {
      entityType: 'users'
    },
    queryParams: {
      page: 1,
      limit: 10
    },
    url_examples: [
      'GET /api/audit/entities/users',
      'GET /api/audit/entities/mercados',
      'GET /api/audit/entities/facturas',
      'GET /api/audit/entities/auth',
      'GET /api/audit/entities/users?page=2&limit=15'
    ],
    expectedResponse: {
      status: 200,
      body: {
        data: [
          {
            id: 'uuid-del-log',
            accion: 'CREATE',
            tabla: 'users',
            userId: 'uuid-del-admin',
            registroId: 'uuid-del-usuario-creado',
            datosAntes: null,
            datosDespues: '{"username":"newuser","email":"new@example.com"}',
            ip: '192.168.1.100',
            userAgent: 'PostmanRuntime/7.29.0',
            createdAt: '2025-07-15T16:20:00.000Z',
            user: {
              id: 'uuid-del-admin',
              username: 'admin',
              nombre: 'Administrador'
            }
          }
        ],
        pagination: {
          current_page: 1,
          total_pages: 8,
          total_items: 75,
          items_per_page: 10
        },
        entitySummary: {
          entityType: 'users',
          totalLogs: 75,
          actionBreakdown: {
            CREATE: 20,
            UPDATE: 35,
            DELETE: 10,
            CHANGE_PASSWORD: 10
          },
          mostActiveUser: {
            userId: 'uuid-del-admin',
            username: 'admin',
            actionCount: 45
          }
        }
      }
    },
    notes: [
      'Tipos de entidad v√°lidos: users, mercados, locales, facturas, auth',
      'Incluye resumen de actividad por entidad',
      'Muestra desglose de acciones por tipo',
      'Identifica el usuario m√°s activo en esa entidad'
    ]
  },

  {
    id: 6,
    method: 'GET',
    endpoint: '/api/audit/logs/:id',
    title: 'Obtener Log Espec√≠fico por ID',
    description: 'Recupera un log de auditor√≠a espec√≠fico con todos sus detalles',
    authRequired: true,
    roles: ['ADMIN', 'USER', 'MARKET'],
    headers: {
      'Cookie': 'auth-token=YOUR_JWT_TOKEN'
    },
    pathParams: {
      id: 'uuid-del-log-espec√≠fico'
    },
    url_examples: [
      'GET /api/audit/logs/a1b2c3d4-e5f6-7890-abcd-ef1234567890'
    ],
    expectedResponse: {
      status: 200,
      body: {
        id: 'a1b2c3d4-e5f6-7890-abcd-ef1234567890',
        accion: 'UPDATE',
        tabla: 'users',
        userId: 'f199d049-f069-4a94-9ab3-5cd9fcac0c03',
        registroId: 'de34d9b7-0a00-4c5d-9162-36e92141f6ad',
        datosAntes: '{"nombre":"Nombre Anterior","telefono":"555-0000"}',
        datosDespues: '{"nombre":"Nombre Nuevo","telefono":"555-1111"}',
        ip: '192.168.1.150',
        userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
        createdAt: '2025-07-15T15:45:30.000Z',
        user: {
          id: 'f199d049-f069-4a94-9ab3-5cd9fcac0c03',
          username: 'mougrind',
          nombre: 'Mou',
          apellido: 'Grind',
          email: 'mougrind@amdc.hn',
          role: 'ADMIN'
        },
        relatedLogs: [
          {
            id: 'uuid-otro-log',
            accion: 'VIEW',
            createdAt: '2025-07-15T15:44:00.000Z'
          }
        ],
        changes: {
          nombre: {
            before: 'Nombre Anterior',
            after: 'Nombre Nuevo'
          },
          telefono: {
            before: '555-0000',
            after: '555-1111'
          }
        }
      }
    },
    errorResponses: [
      {
        status: 404,
        body: {
          message: 'Audit log not found',
          error: 'Not Found',
          statusCode: 404
        }
      }
    ],
    notes: [
      'Requiere UUID v√°lido del log',
      'Muestra informaci√≥n completa del usuario',
      'Incluye logs relacionados si existen',
      'Proporciona an√°lisis de cambios para acciones UPDATE',
      'Retorna 404 si el log no existe'
    ]
  }
];

// ==============================================================================
// üìù EJEMPLOS PR√ÅCTICOS PARA POSTMAN
// ==============================================================================

console.log(`
üß™ EJEMPLOS PR√ÅCTICOS PARA TESTING EN POSTMAN:

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
1Ô∏è‚É£ CONFIGURAR AUTENTICACI√ìN GLOBAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1. Crear una nueva Collection en Postman
2. En la pesta√±a "Authorization", seleccionar "No Auth" 
3. En la pesta√±a "Pre-request Script", agregar:

// Script para autenticaci√≥n autom√°tica
pm.sendRequest({
    url: 'http://localhost:3000/api/auth/login',
    method: 'POST',
    header: {
        'Content-Type': 'application/json'
    },
    body: {
        mode: 'raw',
        raw: JSON.stringify({
            "username": "mougrind",
            "contrasena": "@Asd.456@"
        })
    }
}, function (err, response) {
    if (err) {
        console.log('Error en login:', err);
    } else {
        const cookies = response.headers.get('Set-Cookie');
        if (cookies) {
            const authCookie = cookies.split(';')[0];
            pm.globals.set('authCookie', authCookie);
        }
    }
});

4. En cada request, agregar Header:
   Key: Cookie
   Value: {{authCookie}}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
2Ô∏è‚É£ SEQUENCE DE TESTING RECOMENDADA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üî∏ Paso 1: Login para obtener token
POST http://localhost:3000/api/auth/login
{
  "username": "mougrind",
  "contrasena": "@Asd.456@"
}

üî∏ Paso 2: Crear log manual
POST http://localhost:3000/api/audit
{
  "accion": "TEST_CREATE",
  "tabla": "users",
  "registroId": "test-123",
  "datosDespues": {"test": "data"}
}

üî∏ Paso 3: Ver estad√≠sticas generales
GET http://localhost:3000/api/audit/stats

üî∏ Paso 4: Listar logs recientes
GET http://localhost:3000/api/audit/logs?limit=5

üî∏ Paso 5: Filtrar logs por acci√≥n
GET http://localhost:3000/api/audit/logs?accion=LOGIN

üî∏ Paso 6: Ver logs de usuario espec√≠fico
GET http://localhost:3000/api/audit/users/f199d049-f069-4a94-9ab3-5cd9fcac0c03

üî∏ Paso 7: Ver logs por entidad
GET http://localhost:3000/api/audit/entities/auth

üî∏ Paso 8: Ver log espec√≠fico (usar ID de paso 4)
GET http://localhost:3000/api/audit/logs/{ID_FROM_STEP_4}

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
3Ô∏è‚É£ CASOS DE ERROR COMUNES PARA PROBAR
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

üî∏ Sin autenticaci√≥n:
GET http://localhost:3000/api/audit/logs
(sin header Cookie)
Expect: 401 Unauthorized

üî∏ ID inv√°lido:
GET http://localhost:3000/api/audit/logs/invalid-uuid
Expect: 400 Bad Request

üî∏ Log no encontrado:
GET http://localhost:3000/api/audit/logs/00000000-0000-0000-0000-000000000000
Expect: 404 Not Found

üî∏ Entidad inv√°lida:
GET http://localhost:3000/api/audit/entities/invalid-table
Expect: Resultados vac√≠os

üî∏ Par√°metros de paginaci√≥n inv√°lidos:
GET http://localhost:3000/api/audit/logs?page=-1&limit=0
Expect: Error de validaci√≥n

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
`);

// Mostrar cada endpoint en detalle
auditEndpoints.forEach((endpoint, index) => {
  console.log(`
${'‚ïê'.repeat(80)}
${endpoint.id}Ô∏è‚É£ ${endpoint.method} ${endpoint.endpoint}
${'‚ïê'.repeat(80)}

üìã ${endpoint.title}
üìñ ${endpoint.description}

üîê AUTENTICACI√ìN: ${endpoint.authRequired ? '‚úÖ Requerida' : '‚ùå No requerida'}
üë• ROLES: ${endpoint.roles ? endpoint.roles.join(', ') : 'Todos'}

üì§ CONFIGURACI√ìN DEL REQUEST:
${endpoint.method} ${endpoint.endpoint}

üîë HEADERS:
${Object.entries(endpoint.headers || {}).map(([key, value]) => `${key}: ${value}`).join('\n')}

${endpoint.pathParams ? `üéØ PATH PARAMETERS:
${Object.entries(endpoint.pathParams).map(([key, value]) => `${key}: ${value}`).join('\n')}` : ''}

${endpoint.queryParams ? `üîç QUERY PARAMETERS (Opcionales):
${Object.entries(endpoint.queryParams).map(([key, value]) => `${key}: ${value}`).join('\n')}` : ''}

${endpoint.body ? `üì¶ BODY (JSON):
${JSON.stringify(endpoint.body, null, 2)}` : ''}

üåê EJEMPLOS DE URL:
${endpoint.url_examples.map(url => `‚Ä¢ ${url}`).join('\n')}

‚úÖ RESPUESTA EXITOSA (${endpoint.expectedResponse.status}):
${JSON.stringify(endpoint.expectedResponse.body, null, 2)}

${endpoint.errorResponses ? `‚ùå RESPUESTAS DE ERROR:
${endpoint.errorResponses.map(err => `Status ${err.status}:
${JSON.stringify(err.body, null, 2)}`).join('\n\n')}` : ''}

üìù NOTAS IMPORTANTES:
${endpoint.notes.map(note => `‚Ä¢ ${note}`).join('\n')}
  `);
});

console.log(`
${'‚ïê'.repeat(80)}
üéØ RESUMEN DE ENDPOINTS DE AUDITOR√çA
${'‚ïê'.repeat(80)}

üìä TOTAL DE ENDPOINTS: ${auditEndpoints.length}

üìã LISTA R√ÅPIDA:
${auditEndpoints.map(ep => `${ep.id}. ${ep.method} ${ep.endpoint} - ${ep.title}`).join('\n')}

üîí TODOS LOS ENDPOINTS REQUIEREN AUTENTICACI√ìN JWT

üöÄ ¬°LISTO PARA PROBAR EN POSTMAN!
${'‚ïê'.repeat(80)}
`);
